

<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>現在位置を表示-1</title>
  <script>
    // getCurrentPosition で位置情報を取得
    function getCurrentPosi() {
      navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    };  //   -----------
    // getCurrentPosition で現在の位置情報を取得
    function successCallback(position) {
      var gl_text = "緯度：" + position.coords.latitude + "度<br>";
      gl_text += "経度：" + position.coords.longitude + "度<br>";
      gl_text += "高度：" + position.coords.altitude + "<br>";
      gl_text += "位置の誤差：" + position.coords.accuracy + "m<br>";
      gl_text += "高度の誤差：" + position.coords.altitudeAccuracy + "<br>";
      gl_text += "方角：" + position.coords.heading + "<br>";
      gl_text += "速度：" + position.coords.speed + "<br>";
      document.getElementById("show_result").innerHTML = gl_text;
    };  //   -----------
    // 位置情報が取得できない場合
    function errorCallback(error) {
      var err_msg = "";
      switch(error.code){  
        case 1:
          err_msg = "位置情報の利用が許可されていません";
          break;
        case 2:
          err_msg = "デバイスの位置が判定できません";
          break;
        case 3:
          err_msg = "タイムアウトしました";
          break;
      }
      document.getElementById("show_result").innerHTML = err_msg;
    }; //   -----------
  </script>
</head>
<body>
  <div class="view" style="padding:15px;">
    <input type="button" value="現在地を確認" onclick="getCurrentPosi()"><br><br>
    <div id="show_result"> ↑ クリックで、ここに位置情報を表示</div>
  </div>
</body>
</html>

